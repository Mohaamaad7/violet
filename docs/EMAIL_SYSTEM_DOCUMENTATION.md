# ğŸ“§ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª - Violet Email System

> **ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆØ«ÙŠÙ‚:** 8 Ø¯ÙŠØ³Ù…Ø¨Ø± 2025  
> **Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 1.0.0  
> **Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… Ù…ÙƒØªÙ…Ù„ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±

---

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
2. [Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©](#Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª-Ø§Ù„Ø£ØµÙ„ÙŠØ©)
3. [Ø§Ù„Ù†Ù‚Ø§Ø´ ÙˆØ§Ù„Ù‚Ø±Ø§Ø±Ø§Øª](#Ø§Ù„Ù†Ù‚Ø§Ø´-ÙˆØ§Ù„Ù‚Ø±Ø§Ø±Ø§Øª)
4. [Ø§Ù„Ø­Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ](#Ø§Ù„Ø­Ù„-Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ)
5. [Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©](#Ø§Ù„Ù…Ù„ÙØ§Øª-Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©)
6. [Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„](#Ù‚ÙˆØ§Ù„Ø¨-Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„)
7. [ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…](#ÙƒÙŠÙÙŠØ©-Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…)
8. [Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±](#Ø¥Ø¹Ø¯Ø§Ø¯-Ø§Ù„Ø³ÙŠØ±ÙØ±)
9. [Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±](#Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±)

---

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù†Ø¸Ø§Ù… Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù…ØªØ¬Ø± Violet Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙŠØªØ¶Ù…Ù†:
- Ù‚ÙˆØ§Ù„Ø¨ Ø¥ÙŠÙ…ÙŠÙ„ Ø¬Ø§Ù‡Ø²Ø© (HTML responsive)
- Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù„Ø¹Ø±Ø¨ÙŠØ© (RTL)
- ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª (sent, delivered, opened, failed)
- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Filament Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ ÙˆØ§Ù„Ø³Ø¬Ù„Ø§Øª
- **Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ø§Ø¹ØªÙ…Ø§Ø¯ÙŠØ§Øª Ø®Ø§Ø±Ø¬ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±**

---

## ğŸ“ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©

Ù…Ù† Ù…Ù„Ù `AI_AGENT_INSTRUCTIONS_EMAIL_SYSTEM.md`:

### Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:
1. âœ… Ù†Ø¸Ø§Ù… Ù‚ÙˆØ§Ù„Ø¨ Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ø±Ù†
2. âœ… Ø¯Ø¹Ù… MJML Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª Ø§Ù„Ù€ responsive
3. âœ… ØªØªØ¨Ø¹ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø©
4. âœ… Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Filament
5. âœ… Ù‚ÙˆØ§Ù„Ø¨ Ø¬Ø§Ù‡Ø²Ø© (ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ØŒ ØªØ±Ø­ÙŠØ¨ØŒ Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŒ Ø¥Ù„Ø®)

---

## ğŸ’¬ Ø§Ù„Ù†Ù‚Ø§Ø´ ÙˆØ§Ù„Ù‚Ø±Ø§Ø±Ø§Øª

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªÙ‚Ù†ÙŠØ©

**Ø§Ù„Ø³Ø¤Ø§Ù„:** ÙƒÙŠÙ Ù†Ø­ÙˆÙ„ MJML Ø¥Ù„Ù‰ HTMLØŸ

**Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø·Ø±ÙˆØ­Ø©:**
1. `spatie/mjml-php` - ÙŠØ­ØªØ§Ø¬ npm/Node.js Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±
2. MJML API - Ø®Ø¯Ù…Ø© Ø®Ø§Ø±Ø¬ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©
3. Pre-compiled HTML - ØªØ­ÙˆÙŠÙ„ Ù…Ø­Ù„ÙŠ ÙˆØ±ÙØ¹ HTML Ø¬Ø§Ù‡Ø²

**Ø§Ù„Ù‚Ø±Ø§Ø± Ø§Ù„Ù…Ø¨Ø¯Ø¦ÙŠ:** Ø§Ø³ØªØ®Ø¯Ø§Ù… `spatie/mjml-php`

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ù…Ø´ÙƒÙ„Ø© npm Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±

**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:** Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„Ø§ ÙŠØ¯Ø¹Ù… npm

**Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ù‚ØªØ±Ø­:** Ø§Ø³ØªØ®Ø¯Ø§Ù… MJML API (https://mjml.io/api)

```
Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: "Ù„Ø§ Ø§Ù†Ø§ Ù…Ø¹ØªØ±Ø¶ Ù„Ø³Ø¨Ø¨ Ø£Ù…Ù†ÙŠ Ø¨Ø­Øª
Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„ Ù‚Ø¯ ØªÙƒÙˆÙ† Ø­Ø³Ø§Ø³Ù‡ Ù„Ù„ØºØ§ÙŠØ©
Ù…Ø§ ÙŠÙ†ÙØ¹Ø´ Ù†Ù‡Ø§Ø¦ÙŠ Ø·Ø±Ù ØªØ§Ù„Øª ÙŠØ´ÙˆÙÙ‡Ø§ Ø­ØªÙ‰ Ù„Ùˆ Ù…Ù† Ø¨Ø§Ø¨ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©"
```

**âœ… Ù‚Ø±Ø§Ø± Ø£Ù…Ù†ÙŠ ØµØ­ÙŠØ­ 100%**

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø§Ù„Ø­Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ

**Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:**

1. **Pre-compile Templates** â­ (Ø§Ù„Ø£ÙØ¶Ù„)
   - ØªØ­ÙˆÙŠÙ„ MJML â†’ HTML Ù…Ø­Ù„ÙŠØ§Ù‹
   - Ø±ÙØ¹ HTML Ø§Ù„Ø¬Ø§Ù‡Ø² Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯
   - Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠÙ‚Ø±Ø£ HTML Ù…Ø¨Ø§Ø´Ø±Ø©

2. **Pure HTML Templates**
   - ÙƒØªØ§Ø¨Ø© HTML Ù…Ø¨Ø§Ø´Ø±Ø© (ØµØ¹Ø¨ Ù„Ù„Ù€ responsive)

3. **Blade Templates**
   - Ø§Ø³ØªØ®Ø¯Ø§Ù… Laravel Blade Ø§Ù„Ø¹Ø§Ø¯ÙŠ

```
Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: "Ø®Ù„ÙŠÙ‡ Ù‚Ø§Ù„Ø¨ Ø¬Ø§Ù‡Ø² - Ø§Ø³Ù‡Ù„"
```

**âœ… Ø§Ù„Ù‚Ø±Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:** Pre-compiled HTML Templates

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø¥Ù„ØºØ§Ø¡ Queue

```
Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: "Ù‚Ù… Ø¨Ø§Ù„ØºØ§Ø¡ php artisan queue:work 
Ø¹Ø§ÙˆØ² Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ ÙÙˆØ±Ø§ Ù…Ø´ Ù„Ø§Ø²Ù… Ø§Ø´ØºÙ„ Ø§Ù„Ø§Ù…Ø± Ø¯Ù‡"
```

**Ø§Ù„ØªØºÙŠÙŠØ±:**
- âŒ `Mail::queue()` - ÙŠØ­ØªØ§Ø¬ `php artisan queue:work`
- âœ… `Mail::send()` - Ø¥Ø±Ø³Ø§Ù„ ÙÙˆØ±ÙŠ

---

## âœ… Ø§Ù„Ø­Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ

### Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Violet Email System                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ EmailService â”‚â”€â”€â”€â–¶â”‚TemplateMail â”‚â”€â”€â”€â–¶â”‚   SMTP    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                   â”‚                           â”‚
â”‚         â–¼                   â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚EmailTemplate â”‚    â”‚  EmailLog    â”‚                  â”‚
â”‚  â”‚ (content_html)â”‚    â”‚  (tracking)  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:
- âœ… **Ø¨Ø¯ÙˆÙ† npm/Node.js** Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±
- âœ… **Ø¨Ø¯ÙˆÙ† API Ø®Ø§Ø±Ø¬ÙŠ** - Ø§Ù„Ø£Ù…Ø§Ù† Ø£ÙˆÙ„Ø§Ù‹
- âœ… **Ø¨Ø¯ÙˆÙ† Queue Worker** - Ø¥Ø±Ø³Ø§Ù„ ÙÙˆØ±ÙŠ
- âœ… **HTML Ø¬Ø§Ù‡Ø²** - Ø£Ø¯Ø§Ø¡ Ø¹Ø§Ù„ÙŠ
- âœ… **RTL/Arabic** - Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„

---

## ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©

### Models (Ø§Ù„Ù†Ù…Ø§Ø°Ø¬):

```
app/Models/
â”œâ”€â”€ EmailTemplate.php    # Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
â””â”€â”€ EmailLog.php         # Ø³Ø¬Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø©
```

### Services (Ø§Ù„Ø®Ø¯Ù…Ø§Øª):

```
app/Services/
â”œâ”€â”€ EmailTemplateService.php  # Ø¹Ø±Ø¶ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ ÙˆØ§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
â””â”€â”€ EmailService.php          # Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª
```

### Mail (Ø§Ù„Ø¨Ø±ÙŠØ¯):

```
app/Mail/
â””â”€â”€ TemplateMail.php     # Mailable class
```

### Filament Resources (Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…):

```
app/Filament/Resources/
â”œâ”€â”€ EmailTemplates/
â”‚   â”œâ”€â”€ EmailTemplateResource.php
â”‚   â”œâ”€â”€ Pages/
â”‚   â”‚   â”œâ”€â”€ CreateEmailTemplate.php
â”‚   â”‚   â”œâ”€â”€ EditEmailTemplate.php
â”‚   â”‚   â””â”€â”€ ListEmailTemplates.php
â”‚   â”œâ”€â”€ Schemas/
â”‚   â”‚   â””â”€â”€ EmailTemplateForm.php
â”‚   â””â”€â”€ Tables/
â”‚       â””â”€â”€ EmailTemplatesTable.php
â”‚
â””â”€â”€ EmailLogs/
    â”œâ”€â”€ EmailLogResource.php
    â”œâ”€â”€ Pages/...
    â”œâ”€â”€ Schemas/...
    â””â”€â”€ Tables/...
```

### Migrations (Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª):

```
database/migrations/
â”œâ”€â”€ 2025_12_08_134718_create_email_templates_table.php
â”œâ”€â”€ 2025_12_08_134728_create_email_logs_table.php
â””â”€â”€ 2025_12_08_180000_add_content_html_to_email_templates.php
```

### Templates (Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©):

```
resources/views/emails/templates/
â”œâ”€â”€ order-confirmation.html      # ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
â”œâ”€â”€ order-status-update.html     # ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨
â”œâ”€â”€ welcome.html                 # Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨
â”œâ”€â”€ password-reset.html          # Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
â””â”€â”€ admin-new-order.html         # Ø¥Ø´Ø¹Ø§Ø± Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ (Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©)
```

### Seeder:

```
database/seeders/
â””â”€â”€ EmailTemplateSeeder.php      # ÙŠØ­Ù…Ù‘Ù„ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ù…Ù† HTML files
```

---

## ğŸ“§ Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„

### 1. ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ (order-confirmation)
- **Ø§Ù„Ù†ÙˆØ¹:** customer
- **Ø§Ù„ØªØµÙ†ÙŠÙ:** order
- **Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:** `ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ #{{ order_number }}`
- **Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª:**
  - `order_number`, `order_total`, `order_subtotal`
  - `order_shipping`, `order_discount`, `order_date`
  - `user_name`, `shipping_address`, `track_url`

### 2. ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ (order-status-update)
- **Ø§Ù„Ù†ÙˆØ¹:** customer
- **Ø§Ù„ØªØµÙ†ÙŠÙ:** order
- **Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:** `ØªØ­Ø¯ÙŠØ« Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ùƒ #{{ order_number }} - {{ order_status }}`
- **Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª:**
  - `order_number`, `order_status`, `order_total`
  - `user_name`, `track_url`

### 3. Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ (welcome)
- **Ø§Ù„Ù†ÙˆØ¹:** customer
- **Ø§Ù„ØªØµÙ†ÙŠÙ:** auth
- **Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:** `Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ {{ app_name }}!`
- **Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª:**
  - `user_name`, `app_name`, `app_url`

### 4. Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (password-reset)
- **Ø§Ù„Ù†ÙˆØ¹:** customer
- **Ø§Ù„ØªØµÙ†ÙŠÙ:** auth
- **Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:** `Ø·Ù„Ø¨ Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± - {{ app_name }}`
- **Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª:**
  - `user_name`, `reset_url`

### 5. Ø¥Ø´Ø¹Ø§Ø± Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© (admin-new-order)
- **Ø§Ù„Ù†ÙˆØ¹:** admin
- **Ø§Ù„ØªØµÙ†ÙŠÙ:** order
- **Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:** `ğŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ #{{ order_number }} - {{ order_total }}`
- **Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª:**
  - `order_number`, `order_total`, `order_items_count`
  - `user_name`, `user_email`, `user_phone`
  - `shipping_address`, `shipping_city`

---

## ğŸ’» ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨:

```php
use App\Services\EmailService;

$emailService = app(EmailService::class);

$emailService->send(
    templateSlug: 'order-confirmation',
    recipientEmail: $order->user->email,
    variables: [
        'order_number' => $order->order_number,
        'order_total' => $order->formatted_total,
        'order_date' => $order->created_at->format('Y/m/d'),
        'user_name' => $order->user->name,
        'shipping_name' => $order->shipping_name,
        'shipping_address' => $order->shipping_address,
        'shipping_city' => $order->shipping_city,
        'shipping_governorate' => $order->shipping_governorate,
        'track_url' => route('orders.track', $order),
        // ... Ø§Ù„Ù…Ø²ÙŠØ¯
    ],
    recipientName: $order->user->name,
    related: $order, // Ù„Ù„Ø±Ø¨Ø· Ø¨Ø§Ù„Ø³Ø¬Ù„
);
```

### Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨:

```php
$emailService->sendWelcome($user);
```

### Ø¥Ø±Ø³Ø§Ù„ Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:

```php
$emailService->sendPasswordReset($user, $resetUrl);
```

### Ø¥Ø±Ø³Ø§Ù„ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨:

```php
$emailService->sendOrderStatusUpdate($order);
```

---

## ğŸ–¥ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±

### 1. Ø³Ø­Ø¨ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª:

```bash
git pull origin master
```

### 2. ØªØ«Ø¨ÙŠØª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ÙŠØ§Øª:

```bash
composer install --no-dev
```

### 3. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø§ÙŠØ¬Ø±ÙŠØ´Ù†:

```bash
php artisan migrate
```

### 4. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨:

```bash
php artisan db:seed --class=EmailTemplateSeeder
```

### 5. Ù…Ø³Ø­ Ø§Ù„ÙƒØ§Ø´:

```bash
php artisan optimize:clear
```

### 6. Ø¥Ø¹Ø¯Ø§Ø¯ SMTP ÙÙŠ `.env`:

```env
MAIL_MAILER=smtp
MAIL_HOST=your-smtp-server.com
MAIL_PORT=587
MAIL_USERNAME=your-username
MAIL_PASSWORD=your-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME="${APP_NAME}"
```

---

## ğŸ§ª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

### Ø§Ø®ØªØ¨Ø§Ø± ÙŠØ¯ÙˆÙŠ Ø³Ø±ÙŠØ¹:

```bash
php artisan tinker
```

```php
// Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„
$service = app(\App\Services\EmailService::class);

$log = $service->send(
    templateSlug: 'welcome',
    recipientEmail: 'test@example.com',
    variables: ['user_name' => 'Ø£Ø­Ù…Ø¯'],
    recipientName: 'Ø£Ø­Ù…Ø¯'
);

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø§Ù„Ø©
$log->status; // should be 'sent'
```

### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨:

```php
// Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨
\App\Models\EmailTemplate::all()->pluck('name', 'slug');

// Ù…Ø¹Ø§ÙŠÙ†Ø© Ù‚Ø§Ù„Ø¨
$template = \App\Models\EmailTemplate::findBySlug('order-confirmation');
$service = app(\App\Services\EmailTemplateService::class);
$html = $service->preview($template);
file_put_contents('preview.html', $html);
```

### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø³Ø¬Ù„Ø§Øª:

```php
// Ø¢Ø®Ø± 10 Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª
\App\Models\EmailLog::latest()->take(10)->get();

// Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª Ø§Ù„ÙØ§Ø´Ù„Ø©
\App\Models\EmailLog::failed()->get();
```

### Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:

- **Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨:** `/admin/email-templates`
- **Ø§Ù„Ø³Ø¬Ù„Ø§Øª:** `/admin/email-logs`

---

## ğŸ“Š Ø¬Ø¯ÙˆÙ„ email_templates

| Column | Type | Description |
|--------|------|-------------|
| id | bigint | Primary key |
| name | string | Ø§Ø³Ù… Ø§Ù„Ù‚Ø§Ù„Ø¨ (Ø¹Ø±Ø¨ÙŠ) |
| slug | string | Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„ÙØ±ÙŠØ¯ |
| type | enum | customer, admin, system |
| category | enum | order, auth, notification, marketing |
| description | text | ÙˆØµÙ Ø§Ù„Ù‚Ø§Ù„Ø¨ |
| subject_ar | string | Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (Ø¹Ø±Ø¨ÙŠ) |
| subject_en | string | Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ) |
| content_mjml | longtext | ÙƒÙˆØ¯ MJML Ø§Ù„Ø£ØµÙ„ÙŠ (Ù„Ù„Ø£Ø±Ø´ÙŠÙ) |
| content_html | longtext | HTML Ø§Ù„Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ âœ… |
| available_variables | json | Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© |
| primary_color | string | Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ |
| secondary_color | string | Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ |
| logo_path | string | Ù…Ø³Ø§Ø± Ø§Ù„Ù„ÙˆØ¬Ùˆ |
| is_active | boolean | Ù…ÙØ¹Ù„/Ù…Ø¹Ø·Ù„ |
| created_at | timestamp | - |
| updated_at | timestamp | - |
| deleted_at | timestamp | Soft delete |

---

## ğŸ“Š Ø¬Ø¯ÙˆÙ„ email_logs

| Column | Type | Description |
|--------|------|-------------|
| id | bigint | Primary key |
| email_template_id | bigint | FK to email_templates |
| related_type | string | Polymorphic (Order, User, etc) |
| related_id | bigint | Polymorphic ID |
| recipient_email | string | Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ„Ù… |
| recipient_name | string | Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù… |
| subject | string | Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„ÙØ¹Ù„ÙŠ |
| locale | string | ar, en |
| status | enum | pending, sent, delivered, opened, clicked, failed, bounced |
| error_message | text | Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ (Ø¥Ù† ÙˆØ¬Ø¯) |
| metadata | json | Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© |
| sent_at | timestamp | ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ |
| delivered_at | timestamp | ÙˆÙ‚Øª Ø§Ù„ØªØ³Ù„ÙŠÙ… |
| opened_at | timestamp | ÙˆÙ‚Øª Ø§Ù„ÙØªØ­ |
| clicked_at | timestamp | ÙˆÙ‚Øª Ø§Ù„Ù†Ù‚Ø± |
| created_at | timestamp | - |
| updated_at | timestamp | - |

---

## ğŸ”’ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ù…Ù†ÙŠØ©

1. âœ… **Ù„Ø§ ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù„Ø£ÙŠ Ø·Ø±Ù Ø«Ø§Ù„Ø«**
2. âœ… **Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯**
3. âœ… **Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù€ npm Ø£Ùˆ Node.js Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±**
4. âœ… **Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù€ MJML API**
5. âœ… **Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± SMTP Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ÙÙ‚Ø·**

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©

### Ù„Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:

1. Ø£Ù†Ø´Ø¦ MJML Ù…Ø­Ù„ÙŠØ§Ù‹
2. Ø­ÙˆÙ‘Ù„Ù‡ Ù„Ù€ HTML (ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø£Ùˆ Ø¹Ø¨Ø± https://mjml.io/try-it-live)
3. Ø£Ø¶Ù Ø§Ù„Ù€ HTML ÙÙŠ `resources/views/emails/templates/`
4. Ø­Ø¯Ù‘Ø« `EmailTemplateSeeder.php`
5. Ø´ØºÙ‘Ù„ `php artisan db:seed --class=EmailTemplateSeeder`

### Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‚Ø§Ù„Ø¨:

1. Ø¹Ø¯Ù‘Ù„ Ù…Ù„Ù HTML ÙÙŠ `resources/views/emails/templates/`
2. Ø´ØºÙ‘Ù„ Ø§Ù„Ù€ seeder Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ (Ø£Ùˆ Ø¹Ø¯Ù‘Ù„ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…)

---

## âœ… Ø§Ù„Ø®Ù„Ø§ØµØ©

ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª Ù…ØªÙƒØ§Ù…Ù„ ÙŠÙ„Ø¨ÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ù…Ø¹ Ù…Ø±Ø§Ø¹Ø§Ø©:
- **Ø§Ù„Ø£Ù…Ø§Ù†:** Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ®Ø±Ø¬ Ù„Ø·Ø±Ù Ø«Ø§Ù„Ø«
- **Ø§Ù„Ø¨Ø³Ø§Ø·Ø©:** Ù„Ø§ Ø§Ø¹ØªÙ…Ø§Ø¯ÙŠØ§Øª Ù…Ø¹Ù‚Ø¯Ø©
- **Ø§Ù„Ø£Ø¯Ø§Ø¡:** HTML Ø¬Ø§Ù‡Ø² ÙˆØ¥Ø±Ø³Ø§Ù„ ÙÙˆØ±ÙŠ
- **Ø§Ù„Ù…Ø±ÙˆÙ†Ø©:** Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„Ø©

**Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±! ğŸš€**
